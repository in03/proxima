
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../contributing/">
      
      
      <link rel="icon" href="../../images/proxima_icon.svg">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.3.1">
    
    
      
        <title>Road Map - Proxima</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/code_select.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#road-map" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Proxima" class="md-header__button md-logo" aria-label="Proxima" data-md-component="logo">
      
  <img src="../../images/proxima_icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Proxima
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Road Map
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/in03/proxima" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    in03/proxima
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Proxima

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../User%20Guide/Getting%20Started/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Proxima" class="md-nav__button md-logo" aria-label="Proxima" data-md-component="logo">
      
  <img src="../../images/proxima_icon.svg" alt="logo">

    </a>
    Proxima
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/in03/proxima" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    in03/proxima
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxima
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Road Map
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Road Map
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#2022" class="md-nav__link">
    2022
  </a>
  
    <nav class="md-nav" aria-label="2022">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refactor-job-handling" class="md-nav__link">
    Refactor job-handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-cli-commands" class="md-nav__link">
    Improved CLI commands
  </a>
  
    <nav class="md-nav" aria-label="Improved CLI commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interactive-timeline-queuing" class="md-nav__link">
    Interactive timeline queuing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2023" class="md-nav__link">
    2023
  </a>
  
    <nav class="md-nav" aria-label="2023">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#split-and-stitch-encoding" class="md-nav__link">
    Split and stitch encoding
  </a>
  
    <nav class="md-nav" aria-label="Split and stitch encoding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-proposal" class="md-nav__link">
    Implementation proposal
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-presets" class="md-nav__link">
    Proxy presets
  </a>
  
    <nav class="md-nav" aria-label="Proxy presets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worker-overrides" class="md-nav__link">
    Worker Overrides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Contribute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../philosophy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Philosophy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../User%20Guide/Getting%20Started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../User%20Guide/Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#2022" class="md-nav__link">
    2022
  </a>
  
    <nav class="md-nav" aria-label="2022">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refactor-job-handling" class="md-nav__link">
    Refactor job-handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-cli-commands" class="md-nav__link">
    Improved CLI commands
  </a>
  
    <nav class="md-nav" aria-label="Improved CLI commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interactive-timeline-queuing" class="md-nav__link">
    Interactive timeline queuing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2023" class="md-nav__link">
    2023
  </a>
  
    <nav class="md-nav" aria-label="2023">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#split-and-stitch-encoding" class="md-nav__link">
    Split and stitch encoding
  </a>
  
    <nav class="md-nav" aria-label="Split and stitch encoding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-proposal" class="md-nav__link">
    Implementation proposal
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-presets" class="md-nav__link">
    Proxy presets
  </a>
  
    <nav class="md-nav" aria-label="Proxy presets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#worker-overrides" class="md-nav__link">
    Worker Overrides
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="road-map">Road Map</h1>
<p>Proxima has a few places it wants to go!</p>
<hr />
<h2 id="2022">2022</h2>
<h3 id="refactor-job-handling">Refactor job-handling</h3>
<p>I'm hoping to focus on a large scale refactor of job-handling.
In the early days, Proxima was just two scripts: One that dumped clip metadata into a text file,
and another that watched a directory for those text files and encoded everything in them.
The first computer to take the job would change the <code>status</code> flag in the text file and get going.
Of course we had all sorts of issues with op-locks, race conditions and unhandled exceptions...</p>
<p>Some of that legacy code has remained. Clip attributes are saved into dictionaries
and extended later with project and timeline metadata. There's no typing nor dynamic attributes, just good old fashioned data.
While the data passed by Resolve's API doesn't require the same kind of validation that user input requires, 
it's still difficult to extend or refactor code around job handling, so I'd like to rewrite them as data-classes.</p>
<h3 id="improved-cli-commands">Improved CLI commands</h3>
<p>The CLI commands in Proxima are simple: <code>queue</code> to add jobs, <code>work</code> to consume them, <code>purge</code> to clear them and <code>celery</code> to pass in advanced commands.
I must admit my use case has not changed much over the years. We queue jobs straight from the timeline because it works for us. I don't really know what works
for everyone else. So if you use Proxima, feel free to tell me.</p>
<p>I figure some more options would be fitting however.</p>
<h4 id="interactive-timeline-queuing">Interactive timeline queuing</h4>
<p>Currently <code>queue</code> always refers to the active timeline in the current project. That works nicely. But what if you want to queue all the timelines? Or timelines matching a pattern?
Or be given a list and select at will? See issue <a href="https://github.com/in03/proxima/issues/161">#161</a></p>
<h2 id="2023">2023</h2>
<h3 id="split-and-stitch-encoding">Split and stitch encoding</h3>
<p>Split and stitch encoding or "chunking" allows source media to be divided into time-range "chunks" for more workers to work on before being concatenated as a single file once all are finished.
Let me explain why this is a good idea.</p>
<p>A single worker can encode many proxies simultaneously, but a a single proxy cannot be encoded by many workers simultaneously. 
This can mean a lot of idle processing power when encoding media with a long duration. All the short media will finish first and the long media will be left to individual workers.
Chunking means we can divide the work evenly and win back all that processing power.</p>
<h4 id="considerations">Considerations</h4>
<p>This is a huge undertaking. I've managed to get it working as a proof of concept locally, but to integrate it with Proxima is a different story. 
Integration will depend on the aforementioned "job-handling refactor". There's not much we can do about the complexity besides simplify existing code,
try to follow best practices and model after good examples of similar systems - which unfortunately seem scarce. If anyone knows of any please let me know! </p>
<p>Concatenation is a fast operation but is limited by disk speed.
The overhead can be minimised by only chunking source media over a certain duration. 
Since disk-speed is an environmental factor, the exact duration of a file that is worth chunking will differ for each system. 
We can provide a good default value in settings but leave it up to the end user to configure. </p>
<h4 id="implementation-proposal">Implementation proposal</h4>
<pre class="mermaid"><code>graph TD;
    A[Proxima CLI]--&gt; R
    A --&gt; S(Get setting:&lt;br&gt;duration_worth_chunking)
    S --&gt; |45 seconds| D[Jobs]
    R[Resolve API&lt;br&gt;- Project &lt;br&gt;- Timeline&lt;br&gt;- Clip attributes] --&gt; D
    D --&gt; |45 seconds|T[Create encoding tasks:&lt;br&gt;chunks / full-duration]
    T --&gt; |Tasks that are chunks| C[Wrap as chord:&lt;br&gt; task,&lt;br&gt; concat callback]
    C --&gt; G[Wrap as group:&lt;br&gt;- chords&lt;br&gt;- full-duration]
    T --&gt; |Tasks that are&lt;br&gt;full-duration|G
    G --&gt; Q[Queue tasks]
    Q --&gt; P["Progress discrete completion:&lt;br&gt;len([x for x in results if x.ready)"]</code></pre>
<hr />
<ol>
<li>Run <code>proxima queue</code> </li>
<li>Get the <code>duration_worth_chunking</code> setting value from user settings</li>
<li>Get the project, timeline and source media metadata from Resolve's API</li>
<li>Restructure existing jobs as "chunks" depending on source-media duration.</li>
<li>Wrap chunked jobs as chords with a concatenate callback</li>
<li>Wrap all jobs in a group</li>
<li>Worker side progress displays encoding progress-bar of current chunk and discrete completion of current chord </li>
<li>Queuer side progress displays total average progress-bar and completion based on status of chords AsyncResults and standard AsyncResults</li>
</ol>
<h3 id="proxy-presets">Proxy presets</h3>
<p>The ability to create multiple encoding presets would allows us to set up different settings for different purposes. 
Like h.264 for a project we can send over the internet? Or high quality archival of select takes. 
We could also do this with Resolve's individual clip export from the delivery page, but to achieve distributed encoding, you'd still need more licenses. 
That might be of interest to others.</p>
<p>It also means we can preconfigure some ideal default settings that work for different users as good starting points. 
say a ProRes preset for Mac users, DNxHD preset for Windows, h.264/5 for archival (a lot of fiddly settings we can disambiguate).
We can add comments to explain any unintiutive necessities in the ffmpeg settings. </p>
<div class="language-yaml highlight"><pre><span></span><code><span class="nt">edit_proxy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ffmpeg_loglevel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;error&quot;</span>
<span class="w">  </span><span class="nt">codec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dnxhd&quot;</span>
<span class="w">  </span><span class="nt">vertical_res</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">720</span>
<span class="w">  </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dnxhd_sq&quot;</span>
<span class="w">  </span><span class="nt">pix_fmt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;yuv422p&quot;</span>
<span class="w">  </span><span class="nt">audio_codec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pcm_s16le&quot;</span><span class="w"> </span>
<span class="w">  </span><span class="nt">audio_samplerate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;48000&quot;</span><span class="w"> </span>
<span class="w">  </span><span class="nt">misc_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-&quot;hide_banner&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-&quot;stats&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span>
<span class="w">  </span><span class="nt">ext</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.mov&quot;</span>
<span class="w">  </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">portable_proxy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ffmpeg_loglevel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span>
<span class="w">  </span><span class="nt">codec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;x264&quot;</span>
<span class="w">  </span><span class="nt">vertical_res</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1080</span>
<span class="w">  </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;slow&quot;</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">ext &quot;.mp4&quot;</span>
<span class="w">  </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="w"> </span><span class="c1"># x264 handles best</span>

<span class="nt">portable_archive</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ffmpeg_loglevel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span>
<span class="w">  </span><span class="nt">codec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;x265&quot;</span>
<span class="w">  </span><span class="nt">vertical_res</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2160</span>
<span class="w">  </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;very-slow&quot;</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">ext &quot;.mp4&quot;</span>
<span class="w">  </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="w"> </span><span class="c1"># x264 handles best</span>
</code></pre></div>
<h4 id="worker-overrides">Worker Overrides</h4>
<div class="language-yaml highlight"><pre><span></span><code><span class="c1"># Override queuer settings</span>
<span class="nt">overrides</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Use wildcard matching</span>
<span class="w">  </span><span class="c1"># Latest overrides</span>
<span class="w">  </span><span class="nt">presets</span><span class="p">:</span>
<span class="w">    </span><span class="nt">*</span><span class="p">:</span>
<span class="w">      </span><span class="nt">vertical_res</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">720</span>

<span class="w">    </span><span class="nt">*proxy</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="nt">vertical_res</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1080</span>
<span class="w">        </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">    </span><span class="nt">*archive</span><span class="p">:</span>
<span class="w">       </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">    </span><span class="nt">portable_proxy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"> </span><span class="c1"># Prioritizes last override</span>
<span class="w">      </span><span class="nt">vertical_res</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">720</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 - 2022 Caleb Trevatt
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/in03" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://au.linkedin.com/in/caleb-trevatt-16217b102" target="_blank" rel="noopener" title="au.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.expand", "navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>